// Generated by purs version 0.15.10
import * as $foreign from "./foreign.js";
import * as Control_Applicative from "../Control.Applicative/index.js";
import * as Data_Array_NonEmpty from "../Data.Array.NonEmpty/index.js";
import * as Data_Array_NonEmpty_Internal from "../Data.Array.NonEmpty.Internal/index.js";
import * as Data_Eq from "../Data.Eq/index.js";
import * as Data_Foldable from "../Data.Foldable/index.js";
import * as Data_FoldableWithIndex from "../Data.FoldableWithIndex/index.js";
import * as Data_Function from "../Data.Function/index.js";
import * as Data_Functor from "../Data.Functor/index.js";
import * as Data_Map_Internal from "../Data.Map.Internal/index.js";
import * as Data_Monoid from "../Data.Monoid/index.js";
import * as Data_Newtype from "../Data.Newtype/index.js";
import * as Data_Semigroup from "../Data.Semigroup/index.js";
import * as Data_Show from "../Data.Show/index.js";
import * as Data_Show_Generic from "../Data.Show.Generic/index.js";
import * as Data_String_CaseInsensitive from "../Data.String.CaseInsensitive/index.js";
import * as Data_TraversableWithIndex from "../Data.TraversableWithIndex/index.js";
import * as Data_Tuple from "../Data.Tuple/index.js";
import * as Effect from "../Effect/index.js";
import * as HTTPure_Headers from "../HTTPure.Headers/index.js";
import * as HTTPure_Lookup from "../HTTPure.Lookup/index.js";
import * as Node_HTTP from "../Node.HTTP/index.js";
var un = /* #__PURE__ */ Data_Newtype.un();
var $$void = /* #__PURE__ */ Data_Functor["void"](Effect.functorEffect);
var traverseWithIndex = /* #__PURE__ */ Data_TraversableWithIndex.traverseWithIndex(Data_Map_Internal.traversableWithIndexMap)(Effect.applicativeEffect);
var eq = /* #__PURE__ */ Data_Eq.eq(Data_String_CaseInsensitive.eqCaseInsensitiveString);
var intercalate = /* #__PURE__ */ Data_Foldable.intercalate(Data_Array_NonEmpty_Internal.foldableNonEmptyArray)(Data_Monoid.monoidString);
var foldMapWithIndex = /* #__PURE__ */ Data_FoldableWithIndex.foldMapWithIndex(Data_Map_Internal.foldableWithIndexMap)(Data_Monoid.monoidString);
var unionWith = /* #__PURE__ */ Data_Map_Internal.unionWith(Data_String_CaseInsensitive.ordCaseInsensitiveString);
var append1 = /* #__PURE__ */ Data_Semigroup.append(Data_Array_NonEmpty_Internal.semigroupNonEmptyArray);
var map = /* #__PURE__ */ Data_Functor.map(Data_Functor.functorArray);
var pure = /* #__PURE__ */ Control_Applicative.pure(Data_Array_NonEmpty_Internal.applicativeNonEmptyArray);
var lookup = /* #__PURE__ */ HTTPure_Lookup.lookup(HTTPure_Lookup.lookupMapCaseInsensitiveString);
var insertWith = /* #__PURE__ */ Data_Map_Internal.insertWith(Data_String_CaseInsensitive.ordCaseInsensitiveString);
var MultiHeaders = function (x) {
    return x;
};
var write = function (response) {
    return function (v) {
        var writeField = function (key) {
            var $63 = Node_HTTP.setHeaders(response)(un(Data_String_CaseInsensitive.CaseInsensitiveString)(key));
            return function ($64) {
                return $63(Data_Array_NonEmpty.toArray($64));
            };
        };
        return $$void(traverseWithIndex(writeField)(v));
    };
};
var toString = function (v) {
    var showField = function (key) {
        return function (values) {
            var separator = (function () {
                var $49 = eq(key)("Set-Cookie");
                if ($49) {
                    return "; ";
                };
                return ", ";
            })();
            return un(Data_String_CaseInsensitive.CaseInsensitiveString)(key) + (": " + (intercalate(separator)(values) + "\x0a"));
        };
    };
    return foldMapWithIndex(showField)(v) + "\x0a";
};
var semigroupMultiHeaders = {
    append: function (v) {
        return function (v1) {
            return unionWith(append1)(v)(v1);
        };
    }
};
var read = /* #__PURE__ */ (function () {
    var requestRawHeaders = function ($65) {
        return $65.rawHeaders;
    };
    var $66 = Data_Map_Internal.fromFoldableWith(Data_String_CaseInsensitive.ordCaseInsensitiveString)(Data_Foldable.foldableArray)(Data_Function.flip(append1));
    var $67 = map(function (v) {
        return new Data_Tuple.Tuple(v.value0, pure(v.value1));
    });
    var $68 = $foreign.parseRawHeaders(Data_Tuple.Tuple.create);
    return function ($69) {
        return MultiHeaders($66($67($68(requestRawHeaders($69)))));
    };
})();
var newtypeMultiHeaders = {
    Coercible0: function () {
        return undefined;
    }
};
var monoidMultiHeaders = {
    mempty: Data_Map_Internal.empty,
    Semigroup0: function () {
        return semigroupMultiHeaders;
    }
};
var lookupMultiHeaders = {
    lookup: function (v) {
        return function (key) {
            return lookup(v)(key);
        };
    }
};
var headers$prime = /* #__PURE__ */ (function () {
    var insertField = function (x) {
        return function (v) {
            return insertWith(append1)(v.value0)(v.value1)(x);
        };
    };
    var $70 = Data_Foldable.foldl(Data_Foldable.foldableArray)(insertField)(Data_Map_Internal.empty);
    return function ($71) {
        return MultiHeaders($70($71));
    };
})();
var headers = /* #__PURE__ */ (function () {
    var $72 = map(Data_Functor.map(Data_Tuple.functorTuple)(pure));
    return function ($73) {
        return headers$prime($72($73));
    };
})();
var header$prime = function (key) {
    var $74 = Data_Map_Internal.singleton(key);
    return function ($75) {
        return MultiHeaders($74($75));
    };
};
var header = function (key) {
    var $76 = header$prime(key);
    return function ($77) {
        return $76(Data_Array_NonEmpty.singleton($77));
    };
};
var genericMultiHeaders = {
    to: function (x) {
        return x;
    },
    from: function (x) {
        return x;
    }
};
var showMultiHeaders = {
    show: /* #__PURE__ */ Data_Show_Generic.genericShow(genericMultiHeaders)(/* #__PURE__ */ Data_Show_Generic.genericShowConstructor(/* #__PURE__ */ Data_Show_Generic.genericShowArgsArgument(/* #__PURE__ */ Data_Map_Internal.showMap(Data_String_CaseInsensitive.showCaseInsensitiveString)(/* #__PURE__ */ Data_Array_NonEmpty_Internal.showNonEmptyArray(Data_Show.showString))))({
        reflectSymbol: function () {
            return "MultiHeaders";
        }
    }))
};
var fromHeaders = /* #__PURE__ */ (function () {
    var $78 = Data_Functor.map(Data_Map_Internal.functorMap)(pure);
    var $79 = Data_Map_Internal.fromFoldableWithIndex(Data_String_CaseInsensitive.ordCaseInsensitiveString)(Data_Map_Internal.foldableWithIndexMap);
    var $80 = un(HTTPure_Headers.Headers);
    return function ($81) {
        return MultiHeaders($78($79($80($81))));
    };
})();
var eqMultiHeaders = /* #__PURE__ */ Data_Map_Internal.eqMap(Data_String_CaseInsensitive.eqCaseInsensitiveString)(/* #__PURE__ */ Data_Array_NonEmpty_Internal.eqNonEmptyArray(Data_Eq.eqString));
var empty = Data_Map_Internal.empty;
export {
    MultiHeaders,
    empty,
    fromHeaders,
    header,
    header$prime,
    headers,
    headers$prime,
    read,
    toString,
    write,
    newtypeMultiHeaders,
    genericMultiHeaders,
    lookupMultiHeaders,
    showMultiHeaders,
    eqMultiHeaders,
    semigroupMultiHeaders,
    monoidMultiHeaders
};
